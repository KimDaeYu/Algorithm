n, m = map(int,input().split())
Map = []

check = [ # y, x
    # long 
    # [[-3,0],[-2,0],[-1,0],[0,0]],
    [[0,3],[0,2],[0,1],[0,0]],
    [[3,0],[2,0],[1,0],[0,0]],
    # [[0,-3],[0,-2],[0,-1],[0,0]],
    # square
    # [[-1,-1],[-1,0],[-1,0],[0,0]],
    [[1,1],[1,0],[0,1],[0,0]],
    # L
    [[-2,-1],[-2,0],[-1,0],[0,0]],
    [[-2,1],[-2,0],[-1,0],[0,0]],
    [[-1,2],[0,2],[0,1],[0,0]],
    [[1,2],[0,2],[0,1],[0,0]],
    [[2,1],[2,0],[1,0],[0,0]],
    [[2,-1],[2,0],[1,0],[0,0]],
    [[1,-2],[0,-2],[0,-1],[0,0]],
    [[-1,-2],[0,-2],[0,-1],[0,0]],
    # 4
    [[-2,-1],[-1,-1],[-1,0],[0,0]],
    [[-2,1],[-1,1],[-1,0],[0,0]],
    [[-1,2],[-1,1],[0,1],[0,0]],
    [[1,2],[1,1],[0,1],[0,0]],
    [[2,1],[1,1],[1,0],[0,0]],
    [[2,-1],[1,-1],[1,0],[0,0]],
    [[1,-2],[1,-1],[0,-1],[0,0]],
    [[-1,-2],[-1,-1],[0,-1],[0,0]],
    # 5
    # [[-1,-1],[-2,0],[-1,0],[0,0]],
    # [[-1,1],[-2,0],[-1,0],[0,0]],
    # [[-1,1],[0,2],[0,1],[0,0]],
    # [[1,1],[0,2],[0,1],[0,0]],
    # [[1,1],[2,0],[1,0],[0,0]],
    # [[1,-1],[2,0],[1,0],[0,0]],
    # [[1,-1],[0,-2],[0,-1],[0,0]],
    # [[-1,-1],[0,-2],[0,-1],[0,0]],

    # 5 add?
    [[0,-1],[0,1],[-1,0],[0,0]],
    [[0,-1],[0,1],[1,0],[0,0]],
    [[1,0],[0,-1],[-1,0],[0,0]],
    [[1,0],[0,1],[-1,0],[0,0]]
] 

def match(y,x):
    global check, Map
    max_sum = 0
    for shape in check:
        sum = 0
        flag = True
        # print(shape)
        for point in shape:
            # print(y + point[0],x + point[1],n,m)
            if(-1 < x + point[1] and x + point[1] < m and
                -1 < y + point[0] and y + point[0] < n):
                sum += Map[y + point[0]][x + point[1]]
            else:
                flag = False
                break
        
        if flag:
            max_sum = max(max_sum,sum)
    return max_sum

for i in range(n):
    Map.append(list(map(int,input().split())))

answer = 0
for y in range(n):
    for x in range(m):
        # print("---------")
        # print(y,x)
        max_point = match(y,x)
        # print(max_point)
        answer = max(answer, max_point)

print(answer)